diff --git a/CMakeLists.txt b/CMakeLists.txt
index 47354f2..08e47b3 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -89,7 +89,7 @@ source_group("Fuzzer Files" FILES "${FUZZER_SOURCES}")
 set(THREADS_PREFER_PTHREAD_FLAG ON)
 find_package(Threads REQUIRED)
 
-add_library(juice SHARED ${LIBJUICE_SOURCES})
+add_library(juice ${LIBJUICE_SOURCES})
 set_target_properties(juice PROPERTIES VERSION ${PROJECT_VERSION})
 target_include_directories(juice PUBLIC
     $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include>
@@ -97,6 +97,9 @@ target_include_directories(juice PUBLIC
 target_include_directories(juice PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include/juice)
 target_include_directories(juice PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/src)
 target_compile_definitions(juice PRIVATE $<$<CONFIG:Release>:RELEASE=1>)
+if(${LIBJUICE_STATIC_LINKAGE})
+	target_compile_definitions(juice PUBLIC JUICE_STATIC)
+endif()
 target_link_libraries(juice PRIVATE Threads::Threads)
 
 add_library(juice-static STATIC EXCLUDE_FROM_ALL ${LIBJUICE_SOURCES})
@@ -120,11 +123,15 @@ if(WIN32)
 endif()
 
 if (USE_NETTLE)
-	find_package(Nettle REQUIRED)
+    find_path(NETTLE_INCLUDE_PATH "nettle/hmac.h" REQUIRED)
+    find_library(NETTLE_LIBRARY_PATH NAMES nettle libnettle REQUIRED) 
+    target_include_directories(juice PRIVATE ${NETTLE_INCLUDE_PATH})
+    target_include_directories(juice-static PRIVATE ${NETTLE_INCLUDE_PATH})
+    
     target_compile_definitions(juice PRIVATE USE_NETTLE=1)
-    target_link_libraries(juice PRIVATE Nettle::Nettle)
+    target_link_libraries(juice PRIVATE ${NETTLE_LIBRARY_PATH})
     target_compile_definitions(juice-static PRIVATE USE_NETTLE=1)
-    target_link_libraries(juice-static PRIVATE Nettle::Nettle)
+    target_link_libraries(juice-static PRIVATE ${NETTLE_LIBRARY_PATH})
 else()
     target_compile_definitions(juice PRIVATE USE_NETTLE=0)
     target_compile_definitions(juice-static PRIVATE USE_NETTLE=0)
